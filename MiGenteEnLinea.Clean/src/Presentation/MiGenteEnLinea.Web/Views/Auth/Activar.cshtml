@{
    ViewData["Title"] = "Activar Cuenta";
    Layout = "_LayoutAuth";
}

<div class="login-container animate__animated animate__jello">
    <div id="activationForm" class="login-form animate__animated animate__flipInY">
        <h4 class="text-center">Activación de Cuenta</h4>
        <hr />

        <form asp-action="Activar" method="post">
            @Html.AntiForgeryToken()
            
            <div class="form-group">
                <label for="email">Correo electrónico</label>
                <input type="email" id="email" name="email" class="form-control" placeholder="Correo electrónico" 
                       value="@ViewData["Email"]" readonly />
            </div>

            <div class="form-group">
                <label for="password">Contraseña</label>
                <input type="password" id="password" name="password" class="form-control" placeholder="Contraseña" required />
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirmar contraseña</label>
                <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" placeholder="Confirmar contraseña" required />
            </div>

            <div class="form-group">
                <button type="submit" id="btnActivar" class="btn btn-primary btn-block" disabled>Crear contraseña</button>
            </div>
            
            <div id="passwordError" class="alert alert-danger" style="display: none;">
                Las contraseñas no coinciden.
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var password = document.getElementById('password');
            var confirmPassword = document.getElementById('confirmPassword');
            var btnActivar = document.getElementById('btnActivar');
            var passwordError = document.getElementById('passwordError');

            function validatePasswords() {
                if (password.value && confirmPassword.value) {
                    if (password.value === confirmPassword.value) {
                        btnActivar.disabled = false;
                        passwordError.style.display = 'none';
                    } else {
                        btnActivar.disabled = true;
                        passwordError.style.display = 'block';
                    }
                } else {
                    btnActivar.disabled = true;
                    passwordError.style.display = 'none';
                }
            }

            password.addEventListener('input', validatePasswords);
            confirmPassword.addEventListener('input', validatePasswords);
        });
    </script>
}
